#!/bin/bash

PROCESS="<%= @process_name %>"
ps -ef|grep $PROCESS|grep -v grep|grep -v check_$PROCESS

case $? in
1) VALUE=0
;;
0) VALUE=1
;;
*) VALUE=0
;;
esac

aws cloudwatch put-metric-data --metric-name ${PROCESS}IsRunning --namespace "$PROCESS" --value $VALUE